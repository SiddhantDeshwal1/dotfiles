###############################################################################
# Hyprland Keybindings Configuration
# Author: Man37
# Cleaned & Commented for readability
###############################################################################

# ─────────────────────────────────────────────────────────────────────────────
# VARIABLES
# ─────────────────────────────────────────────────────────────────────────────
$mainMod     = SUPER

# Default paths
$scriptsDir  = $HOME/.config/hypr/scripts
$configs     = $HOME/.config/hypr/configs

# User paths
$UserConfigs = $HOME/.config/hypr/UserConfigs
$UserScripts = $HOME/.config/hypr/UserScripts


# ─────────────────────────────────────────────────────────────────────────────
# SYSTEM CONTROL
# ─────────────────────────────────────────────────────────────────────────────
bind = CTRL ALT, Delete, exec, hyprctl dispatch exit 0   # Exit Hyprland
bind = CTRL ALT, L, exec, $scriptsDir/LockScreen.sh      # Lock screen
bind = CTRL ALT, P, exec, $scriptsDir/Wlogout.sh         # Logout menu

# ─────────────────────────────────────────────────────────────────────────────
# WINDOW MANAGEMENT
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod, Q, killactive                          # Close window
bind = $mainMod SHIFT, Q, exec, $scriptsDir/KillActiveProcess.sh

bind = $mainMod, F, fullscreen,                          # Toggle fullscreen
bind = $mainMod ALT, F, fullscreen,1
bind = $mainMod SHIFT, F, togglefloating                # Toggle floating mode
bind = $mainMod CTRL, F, exec, hyprctl dispatch workspaceopt allfloat  # All float

# Window cycling
bind = ALT, Tab, cyclenext

# ─────────────────────────────────────────────────────────────────────────────
# FEATURES / EXTRAS
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod ALT, R, exec, $scriptsDir/Refresh.sh    # Refresh waybar, swaync, rofi
bind = $mainMod ALT, V, exec, cliphist list | rofi -dmenu -theme ~/.config/rofi/themes/rofi-cliphist.rasi -p "Clipboard:" | cliphist decode | wl-copy
bind = $mainMod, E, exec, rofimoji
bind = $mainMod, R, exec, ~/.config/waybar/scripts/timer.sh menu
bind = , XF86Calculator, exec, rofi -show calc -modi calc -no-show-match -no-sort
bind = $mainMod SHIFT, N, exec, swaync-client -t -sw    # Notification panel
bind = $mainMod, W, exec, waypaper                      # Wallpaper switcher
bind = $mainMod, B, exec, pkill -SIGUSR1 waybar         # Toggle waybar
bind = SUPER+SHIFT, Return, exec, kitty --class floatkitty

# ─────────────────────────────────────────────────────────────────────────────
# MEDIA CONTROL
# ─────────────────────────────────────────────────────────────────────────────
bind = , XF86AudioPlay, exec, $scriptsDir/MediaCtrl.sh --pause


# ─────────────────────────────────────────────────────────────────────────────
# LAYOUT: DWINDLE
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod SHIFT, I, togglesplit                   # Toggle split
bind = $mainMod, P, pseudo                              # Pseudo split


# ─────────────────────────────────────────────────────────────────────────────
# LAYOUT: MASTER
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod CTRL, D, layoutmsg, removemaster
bind = $mainMod, I, layoutmsg, addmaster
bind = $mainMod, J, layoutmsg, cyclenext
bind = $mainMod, K, layoutmsg, cycleprev
bind = $mainMod CTRL, Return, layoutmsg, swapwithmaster


# ─────────────────────────────────────────────────────────────────────────────
# LAYOUT: GENERAL
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod, M, exec, hyprctl dispatch splitratio 0.3


# ─────────────────────────────────────────────────────────────────────────────
# WINDOW GROUPING
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod, G, togglegroup
bind = $mainMod CTRL, tab, changegroupactive            # Switch active window


# ─────────────────────────────────────────────────────────────────────────────
# SCREENSHOTS
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod SHIFT, S, exec, $scriptsDir/ScreenShot.sh --swappy


# ─────────────────────────────────────────────────────────────────────────────
# RESIZE WINDOWS
# ─────────────────────────────────────────────────────────────────────────────
binde = $mainMod SHIFT, left,  resizeactive, -50  0
binde = $mainMod SHIFT, right, resizeactive,  50  0
binde = $mainMod SHIFT, up,    resizeactive,   0 -50
binde = $mainMod SHIFT, down,  resizeactive,   0  50


# ─────────────────────────────────────────────────────────────────────────────
# MOVE WINDOWS
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod CTRL, left,  movewindow, l
bind = $mainMod CTRL, right, movewindow, r
bind = $mainMod CTRL, up,    movewindow, u
bind = $mainMod CTRL, down,  movewindow, d

# Back mouse button → previous workspace
# bind = , mouse:275, workspace, e-1
# # Forward mouse button → next workspace
# bind = , mouse:276, workspace, e+1
# ─────────────────────────────────────────────────────────────────────────────
# FOCUS MANAGEMENT
# ─────────────────────────────────────────────────────────────────────────────
bind = $mainMod, left,  movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up,    movefocus, u
bind = $mainMod, down,  movefocus, d


# ─────────────────────────────────────────────────────────────────────────────
# WORKSPACE MANAGEMENT
# ─────────────────────────────────────────────────────────────────────────────
# Cycle workspaces
# bind = $mainMod, tab, workspace, m+1
# bind = $mainMod SHIFT, tab, workspace, m-1

# Special workspace
bind = $mainMod SHIFT, U, movetoworkspace, special
bind = $mainMod, U, togglespecialworkspace

# Switch workspaces [0-9]
bind = $mainMod, code:10, workspace, 1
bind = $mainMod, code:11, workspace, 2
bind = $mainMod, code:12, workspace, 3
bind = $mainMod, code:13, workspace, 4
bind = $mainMod, code:14, workspace, 5
bind = $mainMod, code:15, workspace, 6
bind = $mainMod, code:16, workspace, 7
bind = $mainMod, code:17, workspace, 8
bind = $mainMod, code:18, workspace, 9
bind = $mainMod, code:19, workspace, 10

# Move active window & follow [SHIFT + 0-9]
bind = $mainMod SHIFT, code:10, movetoworkspace, 1
bind = $mainMod SHIFT, code:11, movetoworkspace, 2
bind = $mainMod SHIFT, code:12, movetoworkspace, 3
bind = $mainMod SHIFT, code:13, movetoworkspace, 4
bind = $mainMod SHIFT, code:14, movetoworkspace, 5
bind = $mainMod SHIFT, code:15, movetoworkspace, 6
bind = $mainMod SHIFT, code:16, movetoworkspace, 7
bind = $mainMod SHIFT, code:17, movetoworkspace, 8
bind = $mainMod SHIFT, code:18, movetoworkspace, 9
bind = $mainMod SHIFT, code:19, movetoworkspace, 10
bind = $mainMod SHIFT, bracketleft,  movetoworkspace, -1
bind = $mainMod SHIFT, bracketright, movetoworkspace, +1

# Move window silently [CTRL + 0-9]
bind = $mainMod CTRL, code:10, movetoworkspacesilent, 1
bind = $mainMod CTRL, code:11, movetoworkspacesilent, 2
bind = $mainMod CTRL, code:12, movetoworkspacesilent, 3
bind = $mainMod CTRL, code:13, movetoworkspacesilent, 4
bind = $mainMod CTRL, code:14, movetoworkspacesilent, 5
bind = $mainMod CTRL, code:15, movetoworkspacesilent, 6
bind = $mainMod CTRL, code:16, movetoworkspacesilent, 7
bind = $mainMod CTRL, code:17, movetoworkspacesilent, 8
bind = $mainMod CTRL, code:18, movetoworkspacesilent, 9
bind = $mainMod CTRL, code:19, movetoworkspacesilent, 10
bind = $mainMod CTRL, bracketleft,  movetoworkspacesilent, -1
bind = $mainMod CTRL, bracketright, movetoworkspacesilent, +1

# Scroll workspaces
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up,   workspace, e-1
bind = $mainMod, period,     workspace, e+1
bind = $mainMod, comma,      workspace, e-1


# ─────────────────────────────────────────────────────────────────────────────
# MOUSE BINDINGS
# ─────────────────────────────────────────────────────────────────────────────
bindm = $mainMod, mouse:272, movewindow                  # Drag window
bindm = $mainMod, mouse:273, resizewindow                # Resize window


windowrulev2 = float, class:^(floatkitty)$
windowrulev2 = size 800 500, class:^(floatkitty)$
windowrulev2 = center, class:^(floatkitty)$

bind = SUPER, grave, workspace, emptyn

# Super + Tab → Toggle between the two most recently used workspaces
bind = SUPER, Tab, workspace, previous

# Super + S → Toggle sticky (pin window to appear on all workspaces)
bind = SUPER, P, pin
