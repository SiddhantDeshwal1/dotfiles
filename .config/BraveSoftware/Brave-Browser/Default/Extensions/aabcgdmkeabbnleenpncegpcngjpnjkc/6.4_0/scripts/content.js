/*Copyright (c) 2024 ksoft https://www.dummysoftware.com*/function siipn(e){var t=!1;if(e)for(var r=document.querySelectorAll("iframe"),n=0;n<r.length;n++){var i=r[n];try{if(i.contentDocument&&(t=e(i.contentDocument)))break}catch(e){}}return t}function onGetPathClick(e){var t,r=document.getElementsByTagName("body")[0];r.style.cursor="default",r.removeEventListener("click",onGetPathClick),r.removeEventListener("keyup",onGetPathClick),27!==e.keyCode&&(r=createUniqueSelector(e.target),t=`Element Type: ${e.target.tagName}
Id: ${e.target.id||"None"}
Class: ${e.target.className||"None"}
Text: ${e.target.text||e.target.src||"None"}
Link: `+(e.target.href||"None"),chrome.runtime.sendMessage({message:"getPath",id:e.target.id,className:e.target.className,tagName:e.target.tagName,string:t,tabId:e.currentTarget.tabId,value:r})),e.preventDefault()}function isUncommonClassName(t){return!["focus","hover","hidden","visible","dirty","touched","valid","disable","enable","active","col-"].find(e=>t.includes(e))}function getDistinctClassList(r){return r.classList&&0!==r.classList.length?(r.parentNode&&Array.from(r.parentNode.children||"")||[]).reduce((e,t)=>r===t?e:e.filter(e=>!t.classList.contains(e)),Array.from(r.classList).filter(isUncommonClassName)):[]}chrome.runtime.onMessage.addListener(function e(t,r,n){if(-1!=t.action.indexOf("getAutoClickIdStatus")){var i="",o=t.action.replace("getAutoClickIdStatus","");if(null!=o&&0<o.length){var l=null;try{l=0==o.indexOf("document.")?1:document.querySelector(o)}catch(e){}i=null!=l?"OK":"Error"}n({result:i})}else if(-1!=t.action.indexOf("findText")){var i=!1,a=t.action.replace("findText","").trim();if(null!=a&&0<a.length){var s,c,o=null;try{o=document.querySelector(a)}catch(e){}(i=null!=(o=o||siipn(function(e){return null!=e.querySelector(a)})||null))||(s=new RegExp(a,"i"),i=(i=(c=(t.isText?document.body.innerText:document.body.innerHTML).match(s))&&0<c.length)||siipn(function(e){return(c=(t.isText?e.body.innerText:e.body.innerHTML).match(s))&&0<c.length}))}n({result:i})}else-1!=t.action.indexOf("getPath")&&(l=t.action.replace("getPath","").trim(),(o=document.getElementsByTagName("body")[0]).removeEventListener("click",onGetPathClick),o.removeEventListener("keyup",onGetPathClick),o.addEventListener("click",onGetPathClick),o.addEventListener("keyup",onGetPathClick),o.style.cursor="pointer",o.tabId=l,n({result:"OK"}));chrome.runtime.onMessage.removeListener(e)});var commonNodes=["div","span","p","b","i","u","strong","em","h2","h3"];function getNthChildString(t,r){var e=t.parentNode&&Array.from(t.parentNode.children||"")||[];return e.find(e=>e!==t&&matchesSelector(e,r))?":nth-child("+(1+e.indexOf(t))+")":""}var createSelector={getElmId(e){var t;if(e.getAttribute("id"))return t=e.getRootNode&&e.getRootNode()||document,(e="#"+escapeSelector(e.getAttribute("id")||"")).match(/player_uid_/)||1!==t.querySelectorAll(e).length?void 0:e},getCustomElm(e,{isCustomElm:t,nodeName:r}){if(t)return r},getElmRoleProp(e){if(e.hasAttribute("role"))return'[role="'+escapeSelector(e.getAttribute("role"))+'"]'},getUncommonElm(e,{isCommonElm:t,isCustomElm:r,nodeName:n}){if(!t&&!r)return"input"===(n=escapeSelector(n))&&e.hasAttribute("type")&&(n+='[type="'+e.type+'"]'),n},getElmNameProp(e){if(!e.hasAttribute("id")&&e.name)return'[name="'+escapeSelector(e.name)+'"]'},getDistinctClass(e,{distinctClassList:t}){if(0<t.length&&t.length<3)return"."+t.map(escapeSelector).join(".")},getFileRefProp(e){let t;if(e.hasAttribute("href"))t="href";else{if(!e.hasAttribute("src"))return;t="src"}e=getFriendlyUriEnd(e.getAttribute(t));if(e)return"["+t+'$="'+encodeURI(e)+'"]'},getCommonName(e,{nodeName:t,isCommonElm:r}){if(r)return t}};function getElmFeatures(r,n){var e=r.nodeName.toLowerCase();const i={nodeName:e,classList:Array.from(r.classList)||[],isCustomElm:e.includes("-"),isCommonElm:commonNodes.includes(e),distinctClassList:getDistinctClassList(r)};return[createSelector.getCustomElm,createSelector.getElmRoleProp,createSelector.getUncommonElm,createSelector.getElmNameProp,createSelector.getDistinctClass,createSelector.getFileRefProp,createSelector.getCommonName].reduce((e,t)=>{return e.length!==n&&(t=t(r,i))&&(t[0].match(/[a-z]/)?e.unshift(t):e.push(t)),e},[])}function generateSelector(e,t,r){let n,i,{isUnique:o=!1}=t;var l=createSelector.getElmId(e),{featureCount:a=2,minDepth:s=1,toRoot:c=!1,childSelectors:u=[]}=t,l=(l?(n=l,o=!0):(n=getElmFeatures(e,a).join(""),n+=getNthChildString(e,n),(o=t.isUnique||1===r.querySelectorAll(n).length)||e!==document.documentElement||(n+=":root"),i=0!==s||!o),[n,...u]);return e.parentElement&&11!==e.parentElement.nodeType&&(c||i)?generateSelector(e.parentNode,{toRoot:c,isUnique:o,childSelectors:l,featureCount:1,minDepth:s-1},r):l.join(" > ")}function createUniqueSelector(e,t={}){if(!e)return"";let r=e.getRootNode&&e.getRootNode()||document;if(11!==r.nodeType)return generateSelector(e,t,r);for(var n=[];11===r.nodeType;)n.push({elm:e,doc:r}),e=r.host,r=e.getRootNode();return n.push({elm:e,doc:r}),n.reverse().map(e=>generateSelector(e.elm,t,e.doc))}function escapeSelector(e){return e}var matchesSelector=(()=>{var r;return(e,t)=>!!e[r=r&&e[r]?r:function(e){for(var t,r=["matches","matchesSelector","mozMatchesSelector","webkitMatchesSelector","msMatchesSelector"],n=r.length,i=0;i<n;i++)if(e[t=r[i]])return t}(e)]&&e[r](t)})();function isMostlyNumbers(e=""){return 0!==e.length&&(e.match(/[0-9]/g)||"").length>=e.length/2}function splitString(e,t){return[e.substring(0,t),e.substring(t)]}function trimRight(e){return e.replace(/\s+$/,"")}function uriParser(e){var t=e;let r="",n="",i="",o="",l="";return e.includes("#")&&([e,l]=splitString(e,e.indexOf("#"))),e.includes("?")&&([e,o]=splitString(e,e.indexOf("?"))),e.includes("://")?([r,e]=e.split("://"),[n,e]=splitString(e,e.indexOf("/"))):"//"===e.substr(0,2)&&(e=e.substr(2),[n,e]=splitString(e,e.indexOf("/"))),(n="www."===n.substr(0,4)?n.substr(4):n)&&n.includes(":")&&([n,i]=splitString(n,n.indexOf(":"))),{original:t,protocol:r,domain:n,port:i,path:e,query:o,hash:l}}function getFriendlyUriEnd(e="",t={}){var r,n,i,o;if(!(e.length<=1||"data:"===e.substr(0,5)||"javascript:"===e.substr(0,11)||e.includes("?")))return{currentDomain:t,maxLength:r=25}=t,{path:e,domain:n,hash:o}=uriParser(e),i=e.substr(e.substr(0,e.length-2).lastIndexOf("/")+1),o?i&&(i+o).length<=r?trimRight(i+o):i.length<2&&2<o.length&&o.length<=r?trimRight(o):void 0:n&&n.length<r&&e.length<=1||e==="/"+i&&n&&t&&n!==t&&(n+e).length<=r?trimRight(n+e):(-1===(o=i.lastIndexOf("."))||1<o)&&(-1!==o||2<i.length)&&i.length<=r&&!i.match(/index(\.[a-zA-Z]{2-4})?/)&&!isMostlyNumbers(i)?trimRight(i):void 0}