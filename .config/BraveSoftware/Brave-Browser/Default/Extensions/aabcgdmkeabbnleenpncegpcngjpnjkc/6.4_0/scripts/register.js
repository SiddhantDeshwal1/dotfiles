/*Copyright (c) 2024 ksoft https://www.dummysoftware.com*/async function isRegistered(){var e=protect(await getStorage("Expression"));return 0==e.indexOf("^O")&&e.indexOf("0$")==e.length-2}function validateRegistrationCode(){var r,o;validateRegistrationForm()&&(r=document.querySelector("#txtCode").value.trim(),(o=document.querySelector("#dialog-message-icon")).classList.add("ui-icon-circle-close"),getUrlResponse("https://www.dummysoftware.com/cgi-bin/checkregcode_easyautorefresh2.pl",r,async function(e){if(e)if(e.error)document.querySelector("#dialog-message-text").innerHTML=e.error;else if(200<=e.status&&e.status<400)try{var t=JSON.parse(e.body);"OK"===t.result&&(await setStorage("Expression",protect("^O"+r+"0$")),await dataSync(),o.classList.remove("ui-icon-circle-close"),o.classList.add("ui-icon-circle-check")),document.querySelector("#dialog-message-text").innerHTML=t.message}catch(e){document.querySelector("#dialog-message-text").innerHTML="Error in response. Please uninstall and reinstall the app and enter your code again. (C1)"}else document.querySelector("#dialog-message-text").innerHTML="Error "+e.status+", "+(e.request?e.request.statusText:"")+". Please check your connection and try again. (D1)";else document.querySelector("#dialog-message-text").innerHTML="Error connecting to server. Please check your connection and try again. (B1)";t=document.querySelector("#dialog-message");t.removeEventListener("click",onDialogMessageClick),t.addEventListener("click",onDialogMessageClick),fadeIn(t)}))}function onDialogMessageClick(){fadeOut(document.querySelector("#dialog-message"))}function getUrlResponse(e,t,r){var o=new XMLHttpRequest;o.open("POST",e),o.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),o.onload=function(){r({status:o.status,body:o.responseText,request:o})},o.onerror=function(){r({error:"Error connecting to server. Please uninstall and reinstall the app then enter your registration code. This should resolve the issue. (A1)",request:o})},o.send("CODE="+t)}function protect(e){var t="";if(null!=e)for(i=0;i<e.length;++i)t+=String.fromCharCode(7^e.charCodeAt(i));return t}